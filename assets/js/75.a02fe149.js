(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{556:function(s,a,e){"use strict";e.r(a);var t=e(4),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"什么是四次挥手？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是四次挥手？"}},[s._v("#")]),s._v(" 什么是四次挥手？")]),s._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bee71-1302549720.cos.ap-shanghai.myqcloud.com/1592977339854-7ae7fc70-1148-4e44-8ecb-e5480a341c2b.jpg"}}),s._v(" "),e("ol",[e("li",[s._v("客户端调用 "),e("code",[s._v("close")]),s._v(" 方法，执行主动关闭，然后会发送一个FIN报文给服务端。从这以后客户端就不能再发送数据给服务端了。客户端进入 "),e("code",[s._v("FIN-WAIT-1")]),s._v(" 状态。FIN报文就是把FIN置为1。")])]),s._v(" "),e("div",{staticClass:"language-markdown line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-markdown"}},[e("code",[s._v("FIN报文是可以携带数据的。比如可以在最后要发送的数据块中携带FIN段。当然也可以不携带数据。但不管是否携带数据，FIN都要消耗一个序列号。\n\n客户端发送完FIN包以后就不能再发送数据了，但是可以接受服务端发送的数据，这个状态叫做——半关闭（half-close)。\n主动发起关闭的一方叫做主动关闭方，另外一方叫做被动关闭方。\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("服务端收到FIN报文后发送ACK确认报文回复客户端，服务端进入 "),e("code",[s._v("CLOSE_WAIT")]),s._v(" 状态。客户端收到ACK确认后进入 "),e("code",[s._v("FIN_WAIT_2")]),s._v(" 状态。")]),s._v(" "),e("li",[s._v("当服务端也没有数据要发送的时候，发送FIN报文给客户端，然后进入 "),e("code",[s._v("LAST_ACK")]),s._v(" 状态，等待客户端的ACK。同样，FIN也需要消耗一个序列号。")]),s._v(" "),e("li",[s._v("客户端收到FIN报文以后，回复ACK确认报文，进入 "),e("code",[s._v("TIME_WAIT")]),s._v(" 状态。等待2个MSL以后，进入 "),e("code",[s._v("CLOSED")]),s._v(" 状态。服务端收到ACK后，也进入 "),e("code",[s._v("CLOSED")]),s._v(" 状态。")])]),s._v(" "),e("h2",{attrs:{id:"为什么要四次挥手？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为什么要四次挥手？"}},[s._v("#")]),s._v(" 为什么要四次挥手？")])])}),[],!1,null,null,null);a.default=n.exports}}]);